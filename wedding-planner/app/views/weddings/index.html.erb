<h1>Wedding To Do's</h1>

<ul>
<% @weddings.each do |wedding| %>
  <li><a href="/weddings/<%= wedding[:id] %>"><%= wedding[:couple_name] %></a></li>
<% end %>
</ul>

<form action='/weddings' method='POST'>
<%= hidden_field_tag :authenticity_token, form_authenticity_token %>

<h3>Couple's names</h3>
<input type="text" name="couple_name">
<h3>Pick a date</h3>
 <input type="date" name="date" class="datepicker">
<h3>Set a budget</h3>

<div class='row'>
<div id='test5'></div>
</div>
<div class='row'>
  <input disabled id='min-val' class='col s6'>
  <input disabled id='max-val' class='col s6'>

</div>

<%
@parsedData = JSON.parse(@body)
%>

<h1>Hotels</h1>

<input name='yelp_id' id='yelp_id' type='hidden'>

<ul id='cards' class='row'>



<!--
possible other location card layout

<% @parsedData["businesses"].sample(15).each do |hi| %>
<li class='col s6 m4 l3' style='opacity:0'>
<div class='card small clearfix'>
<div class="card-image waves-effect waves-block waves-light">
      <img class='activator' style='max-height:100px' src="<%= hi["image_url"] %>">
    </div>
    <div class="card-content">
      <span class="card-title activator grey-text text-darken-4"><%= hi["name"].html_safe %> <i class="material-icons right">more_vert</i></span>
    </div>
    <div class="card-action">
              <a href='<%= hi["url"] %>'>Yelp link</a>
            </div>
    <div class="card-reveal">
      <span class="card-title grey-text text-darken-4"><%= hi["name"].html_safe %> <i class="material-icons right">close</i></span>
      <p><%= hi["price"] %><br>
              <%= hi["location"]["city"] %>, <%= hi["location"]["state"] %></p>
    </div>
          </div>
</li>
<% end %>
-->


<% @parsedData["businesses"].sample(15).each do |hi| %>
<li class='col s6 m4 l3' style='opacity:0'>
<div class='card small clearfix' yelp-id='<%= hi["id"]%>'>
<div class='card-image'>
              <img src="<%= hi["image_url"] %>">
              <span class="card-title"><%= hi["name"].html_safe %></span>
            </div>
            <div class="card-content">
              <p><%= hi["price"] %><br>
              <%= hi["location"]["city"] %>, <%= hi["location"]["state"] %></p>
            </div>
            <div class="card-action">
              <a href='<%= hi["url"] %>'>Yelp link</a>
            </div>

          </div>
</li>
<% end %>
</ul>

<button id='submit-btn' class='btn' style='display:none'>Submit</button>
</form>


<script>
  var slider = document.getElementById('test5');
  noUiSlider.create(slider, {
   start: [5000, 7000],
   connect: true,
   step: 1000,
   range: {
     'min': 0,
     'max': 20000
   },
   format: wNumb({
     decimals: 0
   })
  });

  slider.noUiSlider.on('update', function( values, handle ) {
    $('#min-val').val(values[0]);
    $('#max-val').val(values[1]);
  });



  $('.datepicker').pickadate({
    selectMonths: true, // Creates a dropdown to control month
    selectYears: 15 // Creates a dropdown of 15 years to control year
  });

  $(function(){
    $('.card').parent().on('click', function(){
      $('#cards').children().not(this).fadeOut()
      $('#submit-btn').show()
      $('#yelp_id').val($($(this).children()[0]).attr('yelp-id'))
    })



    Materialize.showStaggeredList('#cards')
  })
</script>
